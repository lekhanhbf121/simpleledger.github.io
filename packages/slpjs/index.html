<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>SLPJS</title>
    <meta name="generator" content="VuePress 1.8.0">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#3a0839">
    <link rel="shortcut icon" href="/favicon.ico"><link rel='canonical' href='https://slp.dev/packages/slpjs/'/>
    <meta name="description" content="">
    <meta property="article:modified_time" content="2020-06-15T03:23:08.000Z">
    <meta property="og:title" content="SLPJS">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://slp.dev/packages/slpjs/">
    <meta property="og:image" content="https://slp.dev/logo.png">
    <meta name="twitter:title" content="SLPJS">
    <meta name="twitter:url" content="https://slp.dev/packages/slpjs/">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content="https://slp.dev/logo.png">
    <meta name="image" content="https://slp.dev/logo.png">
    <meta name="msapplication-TileColor" content="#3a0839">
    <meta name="msapplication-config" content="/browserconfig.xml">
    <meta name="theme-color" content="#5bbad5">
    
    <link rel="preload" href="/assets/css/0.styles.a2612fed.css" as="style"><link rel="preload" href="/assets/js/app.727bd0bc.js" as="script"><link rel="preload" href="/assets/js/2.59409279.js" as="script"><link rel="preload" href="/assets/js/6.cb6c63cc.js" as="script"><link rel="preload" href="/assets/js/30.b3de8cee.js" as="script"><link rel="prefetch" href="/assets/js/10.11bd2d6f.js"><link rel="prefetch" href="/assets/js/11.3448a0e0.js"><link rel="prefetch" href="/assets/js/12.5390e135.js"><link rel="prefetch" href="/assets/js/13.25949c46.js"><link rel="prefetch" href="/assets/js/14.8adf2b39.js"><link rel="prefetch" href="/assets/js/15.f57aebe1.js"><link rel="prefetch" href="/assets/js/16.a9988494.js"><link rel="prefetch" href="/assets/js/17.b632b9c1.js"><link rel="prefetch" href="/assets/js/18.579a7df4.js"><link rel="prefetch" href="/assets/js/19.07b36477.js"><link rel="prefetch" href="/assets/js/20.34496b79.js"><link rel="prefetch" href="/assets/js/21.aa9572ce.js"><link rel="prefetch" href="/assets/js/22.f611c7a9.js"><link rel="prefetch" href="/assets/js/23.fb176ab4.js"><link rel="prefetch" href="/assets/js/24.ae34a08d.js"><link rel="prefetch" href="/assets/js/25.a4764520.js"><link rel="prefetch" href="/assets/js/26.38ce89a0.js"><link rel="prefetch" href="/assets/js/27.b1edb44d.js"><link rel="prefetch" href="/assets/js/28.9dd2f0e6.js"><link rel="prefetch" href="/assets/js/29.b7ec60f2.js"><link rel="prefetch" href="/assets/js/3.8e11cb09.js"><link rel="prefetch" href="/assets/js/31.71a279fa.js"><link rel="prefetch" href="/assets/js/32.5bad9125.js"><link rel="prefetch" href="/assets/js/33.29483670.js"><link rel="prefetch" href="/assets/js/34.42841138.js"><link rel="prefetch" href="/assets/js/35.b99d13bf.js"><link rel="prefetch" href="/assets/js/36.3ce31b1a.js"><link rel="prefetch" href="/assets/js/37.c0523623.js"><link rel="prefetch" href="/assets/js/38.f40e6826.js"><link rel="prefetch" href="/assets/js/39.690a7325.js"><link rel="prefetch" href="/assets/js/4.e08ed9f2.js"><link rel="prefetch" href="/assets/js/40.e3acd5f1.js"><link rel="prefetch" href="/assets/js/41.da4e1119.js"><link rel="prefetch" href="/assets/js/42.f9a30f27.js"><link rel="prefetch" href="/assets/js/43.7f8a50cc.js"><link rel="prefetch" href="/assets/js/44.8e978a53.js"><link rel="prefetch" href="/assets/js/45.92a7fe60.js"><link rel="prefetch" href="/assets/js/46.0072c31d.js"><link rel="prefetch" href="/assets/js/47.d0b4a172.js"><link rel="prefetch" href="/assets/js/48.56897b92.js"><link rel="prefetch" href="/assets/js/49.01e5e0b1.js"><link rel="prefetch" href="/assets/js/5.276ce48f.js"><link rel="prefetch" href="/assets/js/50.e5c0199d.js"><link rel="prefetch" href="/assets/js/51.a3b63ce1.js"><link rel="prefetch" href="/assets/js/52.c689335b.js"><link rel="prefetch" href="/assets/js/53.27b0e617.js"><link rel="prefetch" href="/assets/js/54.90baf352.js"><link rel="prefetch" href="/assets/js/55.75e41a49.js"><link rel="prefetch" href="/assets/js/56.0f4c2dcd.js"><link rel="prefetch" href="/assets/js/57.9fa9f121.js"><link rel="prefetch" href="/assets/js/58.278c7677.js"><link rel="prefetch" href="/assets/js/59.e147c217.js"><link rel="prefetch" href="/assets/js/60.21d56b27.js"><link rel="prefetch" href="/assets/js/61.a94ff6cf.js"><link rel="prefetch" href="/assets/js/62.cfc1d4fb.js"><link rel="prefetch" href="/assets/js/63.ecb1ff64.js"><link rel="prefetch" href="/assets/js/64.5f630325.js"><link rel="prefetch" href="/assets/js/65.29333f2d.js"><link rel="prefetch" href="/assets/js/66.07e30d95.js"><link rel="prefetch" href="/assets/js/67.f1a6158d.js"><link rel="prefetch" href="/assets/js/68.e90e7a5e.js"><link rel="prefetch" href="/assets/js/7.0ad4cf60.js"><link rel="prefetch" href="/assets/js/8.3cd91f71.js"><link rel="prefetch" href="/assets/js/9.14c39fac.js">
    <link rel="stylesheet" href="/assets/css/0.styles.a2612fed.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/slp-documentation-logo.svg" alt="" class="logo"> <!----></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!---->  <ul class="sidebar-links"><li><a href="/get-started/" class="sidebar-link">Get Started</a></li><li><a href="/terminology/" class="sidebar-link">Terminology</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Specifications</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Guides</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Packages</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/packages/overview/" class="sidebar-link">Overview</a></li><li><a href="/packages/slpjs/" aria-current="page" class="active sidebar-link">SLPJS</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/packages/slpjs/#installation" class="sidebar-link">Installation</a></li><li class="sidebar-sub-header"><a href="/packages/slpjs/#transaction-examples" class="sidebar-link">Transaction Examples</a></li><li class="sidebar-sub-header"><a href="/packages/slpjs/#validation-examples" class="sidebar-link">Validation Examples</a></li><li class="sidebar-sub-header"><a href="/packages/slpjs/#building-testing" class="sidebar-link">Building &amp; Testing</a></li></ul></li><li><a href="/packages/slp-validate/" class="sidebar-link">SLP-Validate</a></li><li><a href="/packages/slp-list/" class="sidebar-link">SLP-List</a></li><li><a href="/packages/bchaddrjs-slp/" class="sidebar-link">bchaddrjs-SLP</a></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>Parser</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>Metadata Maker</span> <span class="arrow right"></span></p> <!----></section></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Tooling</span> <span class="arrow right"></span></p> <!----></section></li><li><a href="/community/" class="sidebar-link">Community</a></li></ul> </aside> <main class="page" data-v-4c735fbc> <div class="theme-default-content content__default" data-v-4c735fbc><h1 id="slpjs"><a href="#slpjs" class="header-anchor">#</a> SLPJS</h1> <div class="custom-block tip"><p class="custom-block-title">View Repo:</p> <p><a href="https://github.com/simpleledger/slpjs" target="_blank" rel="noopener noreferrer">https://github.com/simpleledger/slpjs<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></div> <p>SLPJS is a JavaScript Library for validating and building <a href="https://github.com/simpleledger/slp-specification/blob/master/slp-token-type-1.md" target="_blank" rel="noopener noreferrer">Simple Ledger Protocol (SLP)<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> token transactions.   GENESIS, MINT, and SEND token functions are supported.  See <a href="#change-log">change log</a> for updates.</p> <h4 id="table-of-contents"><a href="#table-of-contents" class="header-anchor">#</a> Table of Contents</h4> <p></p><div class="table-of-contents"><ul><li><a href="#installation">Installation</a></li><li><a href="#transaction-examples">Transaction Examples</a><ul><li><a href="#get-balances">Get Balances</a></li><li><a href="#genesis-create-a-new-token">GENESIS - Create a new token</a></li><li><a href="#mint-create-additional-tokens">MINT - Create additional tokens</a></li><li><a href="#send-send-tokens">SEND - Send tokens</a></li><li><a href="#send-send-bch">SEND - Send BCH</a></li><li><a href="#send-send-tokens-from-a-frozen-address">SEND - Send tokens from a frozen address</a></li><li><a href="#send-send-tokens-from-2-of-2-multisig-p2sh">SEND - Send tokens from 2-of-2 multisig (P2SH)</a></li><li><a href="#burn-destroy-tokens-for-a-certain-token-id">BURN - Destroy tokens for a certain Token Id</a></li><li><a href="#address-conversion">Address Conversion</a></li></ul></li><li><a href="#validation-examples">Validation Examples</a><ul><li><a href="#local-validator-with-a-json-rpc-full-node-connection">Local Validator with a JSON RPC full node connection</a></li><li><a href="#local-validation-with-a-remote-full-node-using-rest-bitcoin-com">Local Validation with a remote full node (using rest.bitcoin.com)</a></li><li><a href="#remote-validation-using-rest-bitcoin-com">Remote Validation (using rest.bitcoin.com)</a></li></ul></li><li><a href="#building-testing">Building &amp; Testing</a><ul><li><a href="#requirements">Requirements</a></li><li><a href="#build">Build</a></li><li><a href="#test">Test</a></li></ul></li></ul></div><p></p> <h2 id="installation"><a href="#installation" class="header-anchor">#</a> Installation</h2> <p>NOTE: Using SLPJS requires bitbox-sdk and bitcore-lib-cash to also be installed.</p> <h4 id="for-node-js"><a href="#for-node-js" class="header-anchor">#</a> For node.js</h4> <div class="language- extra-class"><pre class="language-text"><code>$ npm install slpjs bitbox-sdk bitcore-lib-cash
</code></pre></div><h4 id="for-browser-only-works-for-versions-0-26-0"><a href="#for-browser-only-works-for-versions-0-26-0" class="header-anchor">#</a> For browser (only works for versions &lt;= 0.26.0)</h4> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>https://unpkg.com/slpjs@0.26.0<span class="token punctuation">'</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>NOTE: The latest version of slpjs package will be refactored to fix this problem.</p> <h2 id="transaction-examples"><a href="#transaction-examples" class="header-anchor">#</a> Transaction Examples</h2> <p>The following code snippet examples can be copy/pasted directly into the node.js CLI.  See the examples directory for example files written in TypeScript than can be run using <code>tsc &amp; node &lt;filename&gt;</code>.</p> <p>Wallets utilizing this library will want to write their own methods in place of the methods found in <code>TransactionHelpers</code> and <code>BitboxNetwork</code> classes.</p> <p>NOTES:</p> <ul><li>The <a href="https://github.com/MikeMcl/bignumber.js" target="_blank" rel="noopener noreferrer">BigNumber.js library<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> is used to avoid precision issues with numbers having more than 15 significant digits.</li> <li>For the fastest validation performance all of the following transaction examples show how to use SLPJS using default SLP validation via <code>rest.bitcoin.com</code>.  See the <a href="#local-validation">Local Validation</a> section for instructions on how to validate SLP locally with your own full node.</li> <li>All SLPJS methods require token quantities to be expressed in the smallest possible unit of account for the token (i.e., token satoshis).  This requires the token's precision to be used to calculate the quantity. For example, token having a decimal precision of 9 sending an amount of 1.01 tokens would need to first calculate the sending amount using <code>1.01 x 10^9 =&gt; 1010000000</code>.</li></ul> <h3 id="get-balances"><a href="#get-balances" class="header-anchor">#</a> Get Balances</h3> <p>Get all balances for a given example.  See also the <a href="https://github.com/simpleledger/slpjs/blob/master/examples/1-get-token-balances-local.ts" target="_blank" rel="noopener noreferrer">TypeScript example<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// Install BITBOX-SDK v8.1+ for blockchain access</span>
<span class="token comment">// For more information visit: https://www.npmjs.com/package/bitbox-sdk</span>
<span class="token keyword">const</span> <span class="token constant">BITBOXSDK</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'bitbox-sdk'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> slpjs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'slpjs'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// FOR MAINNET UNCOMMENT</span>
<span class="token keyword">let</span> addr <span class="token operator">=</span> <span class="token string">&quot;simpleledger:qrhvcy5xlegs858fjqf8ssl6a4f7wpstaqnt0wauwu&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token constant">BITBOX</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BITBOXSDK<span class="token punctuation">.</span>BITBOX</span><span class="token punctuation">(</span><span class="token punctuation">{</span> restURL<span class="token operator">:</span> <span class="token string">'https://rest.bitcoin.com/v2/'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// FOR TESTNET UNCOMMENT</span>
<span class="token comment">// let addr = &quot;slptest:qpwyc9jnwckntlpuslg7ncmhe2n423304ueqcyw80l&quot;;</span>
<span class="token comment">// const BITBOX = new BITBOXSDK.BITBOX({ restURL: 'https://trest.bitcoin.com/v2/' });</span>

<span class="token keyword">const</span> bitboxNetwork <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">slpjs<span class="token punctuation">.</span>BitboxNetwork</span><span class="token punctuation">(</span><span class="token constant">BITBOX</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> balances<span class="token punctuation">;</span>
<span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  balances <span class="token operator">=</span> <span class="token keyword">await</span> bitboxNetwork<span class="token punctuation">.</span><span class="token function">getAllSlpBalancesAndUtxos</span><span class="token punctuation">(</span>addr<span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;balances: &quot;</span><span class="token punctuation">,</span> balances<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="returns-all-balances-utxos"><a href="#returns-all-balances-utxos" class="header-anchor">#</a> RETURNS ALL BALANCES &amp; UTXOs:</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">{</span>
  satoshis_available_bch<span class="token operator">:</span> <span class="token number">190889</span><span class="token punctuation">,</span>
  satoshis_locked_in_slp_baton<span class="token operator">:</span> <span class="token number">546</span><span class="token punctuation">,</span>
  satoshis_locked_in_slp_token<span class="token operator">:</span> <span class="token number">1092</span><span class="token punctuation">,</span>
  satoshis_in_invalid_token_dag<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
  satoshis_in_invalid_baton_dag<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
  slpTokenBalances<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string">'1cda254d0a995c713b7955298ed246822bee487458cd9747a91d9e81d9d28125'</span><span class="token operator">:</span> BigNumber <span class="token punctuation">{</span> s<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> e<span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span> c<span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token number">1000</span> <span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string">'047918c612e94cce03876f1ad2bd6c9da43b586026811d9b0d02c3c3e910f972'</span><span class="token operator">:</span> BigNumber <span class="token punctuation">{</span> s<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> e<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> c<span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token number">100</span> <span class="token punctuation">]</span> <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  nftParentChildBalances<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string">'parentId1'</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token string">'childId1'</span><span class="token operator">:</span> BigNumber
      <span class="token string">'childId2'</span><span class="token operator">:</span> BigNumber
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string">'parentId2'</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token string">'childId1'</span><span class="token operator">:</span> BigNumber
      <span class="token string">'childId2'</span><span class="token operator">:</span> BigNumber
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  slpTokenUtxos<span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token operator">...</span> <span class="token punctuation">]</span><span class="token punctuation">,</span>
  slpBatonUtxos<span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token operator">...</span> <span class="token punctuation">]</span><span class="token punctuation">,</span>
  invalidTokenUtxos<span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token operator">...</span> <span class="token punctuation">]</span><span class="token punctuation">,</span>
  invalidBatonUtxos<span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token operator">...</span> <span class="token punctuation">]</span><span class="token punctuation">,</span>
  nonSlpUtxos<span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token operator">...</span> <span class="token punctuation">]</span><span class="token punctuation">,</span>
  unknownTokenTypeUtxos<span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token operator">...</span> <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="genesis-create-a-new-token"><a href="#genesis-create-a-new-token" class="header-anchor">#</a> GENESIS - Create a new token</h3> <p>GENESIS is the most simple type of SLP transaction since no special inputs are required.  The following example shows how to create a fungible token.  Also see the TypeScript examples for:</p> <ul><li><a href="https://github.com/simpleledger/slpjs/blob/master/examples/3-genesis-token-type-1.ts" target="_blank" rel="noopener noreferrer">Type 1 Genesis<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</li> <li><a href="https://github.com/simpleledger/slpjs/blob/master/examples/4-genesis-token-type-NFT1-parent.ts" target="_blank" rel="noopener noreferrer">NFT1 Parent Genesis<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</li> <li><a href="https://github.com/simpleledger/slpjs/blob/master/examples/5-genesis-token-type-NFT1-child.ts" target="_blank" rel="noopener noreferrer">NFT1 Child Genesis<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// Install BITBOX-SDK v8.1+ for blockchain access</span>
<span class="token comment">// For more information visit: https://www.npmjs.com/package/bitbox-sdk</span>
<span class="token keyword">const</span> <span class="token constant">BITBOXSDK</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'bitbox-sdk'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> BigNumber <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'bignumber.js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> slpjs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'slpjs'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// FOR MAINNET UNCOMMENT</span>
<span class="token keyword">const</span> <span class="token constant">BITBOX</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BITBOXSDK<span class="token punctuation">.</span>BITBOX</span><span class="token punctuation">(</span><span class="token punctuation">{</span> restURL<span class="token operator">:</span> <span class="token string">'https://rest.bitcoin.com/v2/'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> fundingAddress           <span class="token operator">=</span> <span class="token string">&quot;simpleledger:qrhvcy5xlegs858fjqf8ssl6a4f7wpstaqnt0wauwu&quot;</span><span class="token punctuation">;</span>  <span class="token comment">// &lt;-- must be simpleledger format</span>
<span class="token keyword">const</span> fundingWif               <span class="token operator">=</span> <span class="token string">&quot;L3gngkDg1HW5P9v5GdWWiCi3DWwvw5XnzjSPwNwVPN5DSck3AaiF&quot;</span><span class="token punctuation">;</span>     <span class="token comment">// &lt;-- compressed WIF format</span>
<span class="token keyword">const</span> tokenReceiverAddress     <span class="token operator">=</span> <span class="token string">&quot;simpleledger:qrhvcy5xlegs858fjqf8ssl6a4f7wpstaqnt0wauwu&quot;</span><span class="token punctuation">;</span>  <span class="token comment">// &lt;-- must be simpleledger format</span>
<span class="token keyword">const</span> bchChangeReceiverAddress <span class="token operator">=</span> <span class="token string">&quot;simpleledger:qrhvcy5xlegs858fjqf8ssl6a4f7wpstaqnt0wauwu&quot;</span><span class="token punctuation">;</span>  <span class="token comment">// &lt;-- cashAddr or slpAddr format</span>
<span class="token comment">// For unlimited issuance provide a &quot;batonReceiverAddress&quot;</span>
<span class="token keyword">const</span> batonReceiverAddress     <span class="token operator">=</span> <span class="token string">&quot;simpleledger:qrhvcy5xlegs858fjqf8ssl6a4f7wpstaqnt0wauwu&quot;</span><span class="token punctuation">;</span>

<span class="token comment">// FOR TESTNET UNCOMMENT</span>
<span class="token comment">// const BITBOX = new BITBOXSDK.BITBOX({ restURL: 'https://trest.bitcoin.com/v2/' });</span>
<span class="token comment">// const fundingAddress           = &quot;slptest:qpwyc9jnwckntlpuslg7ncmhe2n423304ueqcyw80l&quot;;</span>
<span class="token comment">// const fundingWif               = &quot;cVjzvdHGfQDtBEq7oddDRcpzpYuvNtPbWdi8tKQLcZae65G4zGgy&quot;;</span>
<span class="token comment">// const tokenReceiverAddress     = &quot;slptest:qpwyc9jnwckntlpuslg7ncmhe2n423304ueqcyw80l&quot;;</span>
<span class="token comment">// const bchChangeReceiverAddress = &quot;slptest:qpwyc9jnwckntlpuslg7ncmhe2n423304ueqcyw80l&quot;;</span>
<span class="token comment">// // For unlimited issuance provide a &quot;batonReceiverAddress&quot;</span>
<span class="token comment">// const batonReceiverAddress     = &quot;slptest:qpwyc9jnwckntlpuslg7ncmhe2n423304ueqcyw80l&quot;;</span>

<span class="token keyword">const</span> bitboxNetwork <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">slpjs<span class="token punctuation">.</span>BitboxNetwork</span><span class="token punctuation">(</span><span class="token constant">BITBOX</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 1) Get all balances at the funding address.</span>
<span class="token keyword">let</span> balances<span class="token punctuation">;</span> 
<span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  balances <span class="token operator">=</span> <span class="token keyword">await</span> bitboxNetwork<span class="token punctuation">.</span><span class="token function">getAllSlpBalancesAndUtxos</span><span class="token punctuation">(</span>fundingAddress<span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;'balances' variable is set.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'BCH balance:'</span><span class="token punctuation">,</span> balances<span class="token punctuation">.</span>satoshis_available_bch<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// WAIT FOR NETWORK RESPONSE...</span>

<span class="token comment">// 2) Select decimal precision for this new token</span>
<span class="token keyword">let</span> decimals <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> name <span class="token operator">=</span> <span class="token string">&quot;Awesome SLPJS README Token&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> ticker <span class="token operator">=</span> <span class="token string">&quot;SLPJS&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> documentUri <span class="token operator">=</span> <span class="token string">&quot;info@simpleledger.io&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> documentHash <span class="token operator">=</span> <span class="token keyword">null</span>
<span class="token keyword">let</span> initialTokenQty <span class="token operator">=</span> <span class="token number">1000000</span>

<span class="token comment">// 3) Calculate the token quantity with decimal precision included</span>
initialTokenQty <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">BigNumber</span><span class="token punctuation">(</span>initialTokenQty<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">times</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token operator">**</span>decimals<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 4) Set private keys</span>
balances<span class="token punctuation">.</span>nonSlpUtxos<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">txo</span> <span class="token operator">=&gt;</span> txo<span class="token punctuation">.</span>wif <span class="token operator">=</span> fundingWif<span class="token punctuation">)</span>

<span class="token comment">// 5) Use &quot;simpleTokenGenesis()&quot; helper method</span>
<span class="token keyword">let</span> genesisTxid<span class="token punctuation">;</span>
<span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    genesisTxid <span class="token operator">=</span> <span class="token keyword">await</span> bitboxNetwork<span class="token punctuation">.</span><span class="token function">simpleTokenGenesis</span><span class="token punctuation">(</span>
        name<span class="token punctuation">,</span> 
        ticker<span class="token punctuation">,</span> 
        initialTokenQty<span class="token punctuation">,</span>
        documentUri<span class="token punctuation">,</span>
        documentHash<span class="token punctuation">,</span>
        decimals<span class="token punctuation">,</span>
        tokenReceiverAddress<span class="token punctuation">,</span>
        batonReceiverAddress<span class="token punctuation">,</span>
        bchChangeReceiverAddress<span class="token punctuation">,</span>
        balances<span class="token punctuation">.</span>nonSlpUtxos
        <span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;GENESIS txn complete:&quot;</span><span class="token punctuation">,</span>genesisTxid<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><h3 id="mint-create-additional-tokens"><a href="#mint-create-additional-tokens" class="header-anchor">#</a> MINT - Create additional tokens</h3> <p>Adding additional tokens for a token that already exists is possible if you are in control of the minting &quot;baton&quot;.  This minting baton is a special UTXO that gives authority to add to the token's circulating supply.  Also see the <a href="https://github.com/simpleledger/slpjs/blob/master/examples/6-mint-token.ts" target="_blank" rel="noopener noreferrer">TypeScript example<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// Install BITBOX-SDK v8.1+ for blockchain access</span>
<span class="token comment">// For more information visit: https://www.npmjs.com/package/bitbox-sdk</span>
<span class="token keyword">const</span> <span class="token constant">BITBOXSDK</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'bitbox-sdk'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> BigNumber <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'bignumber.js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> slpjs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'slpjs'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// FOR MAINNET UNCOMMENT</span>
<span class="token keyword">const</span> <span class="token constant">BITBOX</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BITBOXSDK<span class="token punctuation">.</span>BITBOX</span><span class="token punctuation">(</span><span class="token punctuation">{</span> restURL<span class="token operator">:</span> <span class="token string">'https://rest.bitcoin.com/v2/'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> fundingAddress           <span class="token operator">=</span> <span class="token string">&quot;simpleledger:qrhvcy5xlegs858fjqf8ssl6a4f7wpstaqnt0wauwu&quot;</span><span class="token punctuation">;</span>  <span class="token comment">// &lt;-- must be simpleledger format</span>
<span class="token keyword">const</span> fundingWif               <span class="token operator">=</span> <span class="token string">&quot;L3gngkDg1HW5P9v5GdWWiCi3DWwvw5XnzjSPwNwVPN5DSck3AaiF&quot;</span><span class="token punctuation">;</span>     <span class="token comment">// &lt;-- compressed WIF format</span>
<span class="token keyword">const</span> tokenReceiverAddress     <span class="token operator">=</span> <span class="token string">&quot;simpleledger:qrhvcy5xlegs858fjqf8ssl6a4f7wpstaqnt0wauwu&quot;</span><span class="token punctuation">;</span>  <span class="token comment">// &lt;-- must be simpleledger format</span>
<span class="token keyword">const</span> batonReceiverAddress     <span class="token operator">=</span> <span class="token string">&quot;simpleledger:qrhvcy5xlegs858fjqf8ssl6a4f7wpstaqnt0wauwu&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> bchChangeReceiverAddress <span class="token operator">=</span> <span class="token string">&quot;simpleledger:qrhvcy5xlegs858fjqf8ssl6a4f7wpstaqnt0wauwu&quot;</span><span class="token punctuation">;</span>  <span class="token comment">// &lt;-- cashAddr or slpAddr format</span>
<span class="token keyword">const</span> tokenIdHexToMint <span class="token operator">=</span> <span class="token string">&quot;adcf120f51d45056bc79353a2831ecd1843922b3d9fac5f109160bd2d49d3f4c&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> additionalTokenQty <span class="token operator">=</span> <span class="token number">1000</span>

<span class="token comment">// FOR TESTNET UNCOMMENT</span>
<span class="token comment">// const BITBOX = new BITBOXSDK.BITBOX({ restURL: 'https://trest.bitcoin.com/v2/' });</span>
<span class="token comment">// const fundingAddress           = &quot;slptest:qpwyc9jnwckntlpuslg7ncmhe2n423304ueqcyw80l&quot;;</span>
<span class="token comment">// const fundingWif               = &quot;cVjzvdHGfQDtBEq7oddDRcpzpYuvNtPbWdi8tKQLcZae65G4zGgy&quot;;</span>
<span class="token comment">// const tokenReceiverAddress     = &quot;slptest:qpwyc9jnwckntlpuslg7ncmhe2n423304ueqcyw80l&quot;;</span>
<span class="token comment">// const batonReceiverAddress     = &quot;slptest:qpwyc9jnwckntlpuslg7ncmhe2n423304ueqcyw80l&quot;;</span>
<span class="token comment">// const bchChangeReceiverAddress = &quot;slptest:qpwyc9jnwckntlpuslg7ncmhe2n423304ueqcyw80l&quot;;</span>
<span class="token comment">// const tokenIdHexToMint = &quot;a67e2abb2fcfaa605c6a3b0dfb642cc830b63138d85b5e95eee523fdbded4d74&quot;;</span>
<span class="token comment">// let additionalTokenQty = 1000</span>

<span class="token keyword">const</span> bitboxNetwork <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">slpjs<span class="token punctuation">.</span>BitboxNetwork</span><span class="token punctuation">(</span><span class="token constant">BITBOX</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 1) Get all balances at the funding address.</span>
<span class="token keyword">let</span> balances<span class="token punctuation">;</span> 
<span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  balances <span class="token operator">=</span> <span class="token keyword">await</span> bitboxNetwork<span class="token punctuation">.</span><span class="token function">getAllSlpBalancesAndUtxos</span><span class="token punctuation">(</span>fundingAddress<span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;'balances' variable is set.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span>balances<span class="token punctuation">.</span>slpBatonUtxos<span class="token punctuation">[</span>tokenIdHexToMint<span class="token punctuation">]</span><span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;You have the minting baton for this token&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">else</span>
    <span class="token keyword">throw</span> <span class="token function">Error</span><span class="token punctuation">(</span><span class="token string">&quot;You don't have the minting baton for this token&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 2) Fetch critical token decimals information using bitdb</span>
<span class="token keyword">let</span> tokenDecimals<span class="token punctuation">;</span>
<span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> tokenInfo <span class="token operator">=</span> <span class="token keyword">await</span> bitboxNetwork<span class="token punctuation">.</span><span class="token function">getTokenInformation</span><span class="token punctuation">(</span>tokenIdHexToMint<span class="token punctuation">)</span><span class="token punctuation">;</span>
    tokenDecimals <span class="token operator">=</span> tokenInfo<span class="token punctuation">.</span>decimals<span class="token punctuation">;</span> 
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Token precision: &quot;</span> <span class="token operator">+</span> tokenDecimals<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// WAIT FOR ASYNC METHOD TO COMPLETE</span>

<span class="token comment">// 3) Multiply the specified token quantity by 10^(token decimal precision)</span>
<span class="token keyword">let</span> mintQty <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">BigNumber</span><span class="token punctuation">(</span>additionalTokenQty<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">times</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token operator">**</span>tokenDecimals<span class="token punctuation">)</span>

<span class="token comment">// 4) Filter the list to choose ONLY the baton of interest </span>
<span class="token comment">// NOTE: (spending other batons for other tokens will result in losing ability to mint those tokens)</span>
<span class="token keyword">let</span> inputUtxos <span class="token operator">=</span> balances<span class="token punctuation">.</span>slpBatonUtxos<span class="token punctuation">[</span>tokenIdHexToMint<span class="token punctuation">]</span>

<span class="token comment">// 5) Simply sweep our BCH (non-SLP) utxos to fuel the transaction</span>
inputUtxos <span class="token operator">=</span> inputUtxos<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>balances<span class="token punctuation">.</span>nonSlpUtxos<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 6) Set the proper private key for each Utxo</span>
inputUtxos<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">txo</span> <span class="token operator">=&gt;</span> txo<span class="token punctuation">.</span>wif <span class="token operator">=</span> fundingWif<span class="token punctuation">)</span>

<span class="token comment">// 7) MINT token using simple function</span>
<span class="token keyword">let</span> mintTxid<span class="token punctuation">;</span>
<span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    mintTxid <span class="token operator">=</span> <span class="token keyword">await</span> bitboxNetwork<span class="token punctuation">.</span><span class="token function">simpleTokenMint</span><span class="token punctuation">(</span>
        tokenIdHexToMint<span class="token punctuation">,</span> 
        mintQty<span class="token punctuation">,</span> 
        inputUtxos<span class="token punctuation">,</span> 
        tokenReceiverAddress<span class="token punctuation">,</span> 
        batonReceiverAddress<span class="token punctuation">,</span> 
        bchChangeReceiverAddress
        <span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;MINT txn complete:&quot;</span><span class="token punctuation">,</span>mintTxid<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><h3 id="send-send-tokens"><a href="#send-send-tokens" class="header-anchor">#</a> SEND - Send tokens</h3> <p>This example shows the general workflow for sending an existing token.  Also see the <a href="https://github.com/simpleledger/slpjs/blob/master/examples/7-send-token-p2pkh.ts" target="_blank" rel="noopener noreferrer">TypeScript example<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// Install BITBOX-SDK v8.1+ for blockchain access</span>
<span class="token comment">// For more information visit: https://www.npmjs.com/package/bitbox-sdk</span>
<span class="token keyword">const</span> <span class="token constant">BITBOXSDK</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'bitbox-sdk'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> BigNumber <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'bignumber.js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> slpjs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'slpjs'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// FOR MAINNET UNCOMMENT</span>
<span class="token keyword">const</span> <span class="token constant">BITBOX</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BITBOXSDK<span class="token punctuation">.</span>BITBOX</span><span class="token punctuation">(</span><span class="token punctuation">{</span> restURL<span class="token operator">:</span> <span class="token string">'https://rest.bitcoin.com/v2/'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> fundingAddress           <span class="token operator">=</span> <span class="token string">&quot;simpleledger:qrhvcy5xlegs858fjqf8ssl6a4f7wpstaqnt0wauwu&quot;</span><span class="token punctuation">;</span>     <span class="token comment">// &lt;-- must be simpleledger format</span>
<span class="token keyword">const</span> fundingWif               <span class="token operator">=</span> <span class="token string">&quot;L3gngkDg1HW5P9v5GdWWiCi3DWwvw5XnzjSPwNwVPN5DSck3AaiF&quot;</span><span class="token punctuation">;</span>        <span class="token comment">// &lt;-- compressed WIF format</span>
<span class="token keyword">const</span> tokenReceiverAddress     <span class="token operator">=</span> <span class="token punctuation">[</span> <span class="token string">&quot;simpleledger:qplrqmjgpug2qrfx4epuknvwaf7vxpnuevyswakrq9&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// &lt;-- must be simpleledger format</span>
<span class="token keyword">const</span> bchChangeReceiverAddress <span class="token operator">=</span> <span class="token string">&quot;simpleledger:qrhvcy5xlegs858fjqf8ssl6a4f7wpstaqnt0wauwu&quot;</span><span class="token punctuation">;</span>     <span class="token comment">// &lt;-- must be simpleledger format</span>
<span class="token keyword">let</span> tokenId <span class="token operator">=</span> <span class="token string">&quot;d32b4191d3f78909f43a3f5853ba59e9f2d137925f28e7780e717f4b4bfd4a3f&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> sendAmounts <span class="token operator">=</span> <span class="token punctuation">[</span> <span class="token number">1</span> <span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token comment">// FOR TESTNET UNCOMMENT</span>
<span class="token comment">// const BITBOX = new BITBOXSDK.BITBOX({ restURL: 'https://trest.bitcoin.com/v2/' });</span>
<span class="token comment">// const fundingAddress           = &quot;slptest:qpwyc9jnwckntlpuslg7ncmhe2n423304ueqcyw80l&quot;;   // &lt;-- must be simpleledger format</span>
<span class="token comment">// const fundingWif               = &quot;cVjzvdHGfQDtBEq7oddDRcpzpYuvNtPbWdi8tKQLcZae65G4zGgy&quot;; // &lt;-- compressed WIF format</span>
<span class="token comment">// const tokenReceiverAddress     = &quot;slptest:qpwyc9jnwckntlpuslg7ncmhe2n423304ueqcyw80l&quot;;   // &lt;-- must be simpleledger format</span>
<span class="token comment">// const bchChangeReceiverAddress = &quot;slptest:qpwyc9jnwckntlpuslg7ncmhe2n423304ueqcyw80l&quot;;   // &lt;-- must be simpleledger format</span>
<span class="token comment">// let tokenId = &quot;78d57a82a0dd9930cc17843d9d06677f267777dd6b25055bad0ae43f1b884091&quot;;</span>
<span class="token comment">// let sendAmounts = [ 10 ];</span>

<span class="token keyword">const</span> bitboxNetwork <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">slpjs<span class="token punctuation">.</span>BitboxNetwork</span><span class="token punctuation">(</span><span class="token constant">BITBOX</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 1) Fetch critical token information</span>
<span class="token keyword">let</span> tokenDecimals<span class="token punctuation">;</span>
<span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> tokenInfo <span class="token operator">=</span> <span class="token keyword">await</span> bitboxNetwork<span class="token punctuation">.</span><span class="token function">getTokenInformation</span><span class="token punctuation">(</span>tokenId<span class="token punctuation">)</span><span class="token punctuation">;</span>
    tokenDecimals <span class="token operator">=</span> tokenInfo<span class="token punctuation">.</span>decimals<span class="token punctuation">;</span> 
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Token precision: &quot;</span> <span class="token operator">+</span> tokenDecimals<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Wait for network responses...</span>

<span class="token comment">// 2) Check that token balance is greater than our desired sendAmount</span>
<span class="token keyword">let</span> balances<span class="token punctuation">;</span> 
<span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  balances <span class="token operator">=</span> <span class="token keyword">await</span> bitboxNetwork<span class="token punctuation">.</span><span class="token function">getAllSlpBalancesAndUtxos</span><span class="token punctuation">(</span>fundingAddress<span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;'balances' variable is set.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>balances<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span>balances<span class="token punctuation">.</span>slpTokenBalances<span class="token punctuation">[</span>tokenId<span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;You need to fund the addresses provided in this example with tokens and BCH.  Change the tokenId as required.&quot;</span><span class="token punctuation">)</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Token balance:&quot;</span><span class="token punctuation">,</span> balances<span class="token punctuation">.</span>slpTokenBalances<span class="token punctuation">[</span>tokenId<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">toFixed</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">10</span><span class="token operator">**</span>tokenDecimals<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Wait for network responses...</span>

<span class="token comment">// 3) Calculate send amount in &quot;Token Satoshis&quot;.  In this example we want to just send 1 token unit to someone...</span>
sendAmounts <span class="token operator">=</span> sendAmounts<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">a</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">BigNumber</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">times</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token operator">**</span>tokenDecimals<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// Don't forget to account for token precision</span>

<span class="token comment">// 4) Get all of our token's UTXOs</span>
<span class="token keyword">let</span> inputUtxos <span class="token operator">=</span> balances<span class="token punctuation">.</span>slpTokenUtxos<span class="token punctuation">[</span>tokenId<span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token comment">// 5) Simply sweep our BCH utxos to fuel the transaction</span>
inputUtxos <span class="token operator">=</span> inputUtxos<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>balances<span class="token punctuation">.</span>nonSlpUtxos<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 6) Set the proper private key for each Utxo</span>
inputUtxos<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">txo</span> <span class="token operator">=&gt;</span> txo<span class="token punctuation">.</span>wif <span class="token operator">=</span> fundingWif<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 7) Send token</span>
<span class="token keyword">let</span> sendTxid<span class="token punctuation">;</span>
<span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    sendTxid <span class="token operator">=</span> <span class="token keyword">await</span> bitboxNetwork<span class="token punctuation">.</span><span class="token function">simpleTokenSend</span><span class="token punctuation">(</span>
        tokenId<span class="token punctuation">,</span> 
        sendAmounts<span class="token punctuation">,</span> 
        inputUtxos<span class="token punctuation">,</span> 
        tokenReceiverAddress<span class="token punctuation">,</span> 
        bchChangeReceiverAddress
        <span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;SEND txn complete:&quot;</span><span class="token punctuation">,</span> sendTxid<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="send-send-bch"><a href="#send-send-bch" class="header-anchor">#</a> SEND - Send BCH</h3> <p>This example demonstrates how to send BCH from a SLP enabled wallet. This API ensures the BCH transaction does not use SLP UTXOs which can cause token loss for the wallet.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// Install BITBOX-SDK v8.1+ for blockchain access</span>
<span class="token comment">// For more information visit: https://www.npmjs.com/package/bitbox-sdk</span>
<span class="token keyword">const</span> <span class="token constant">BITBOXSDK</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'bitbox-sdk'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> BigNumber <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'bignumber.js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> slpjs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'slpjs'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// FOR MAINNET</span>
<span class="token keyword">const</span> <span class="token constant">BITBOX</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BITBOXSDK<span class="token punctuation">.</span>BITBOX</span><span class="token punctuation">(</span><span class="token punctuation">{</span> restURL<span class="token operator">:</span> <span class="token string">'https://rest.bitcoin.com/v2/'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> fundingAddress           <span class="token operator">=</span> <span class="token string">&quot;bitcoincash:qzq6g2dzadew2ctt6cfhthwcc2q9m60mj56ld2hj5l&quot;</span><span class="token punctuation">;</span>     <span class="token comment">// &lt;-- must be CashAddr format</span>

<span class="token comment">// can use BITBOX.HDNode.toWIF() to generate this</span>
<span class="token keyword">const</span> fundingWif               <span class="token operator">=</span> <span class="token string">&quot;KzzMBS6twjSLAjH3a1wkd7rWs3PpiHq4eQzqSEfHuxbXfxYFUBiL&quot;</span><span class="token punctuation">;</span>        <span class="token comment">// &lt;-- compressed WIF format</span>
<span class="token keyword">const</span> bchReceiverAddress       <span class="token operator">=</span> <span class="token punctuation">[</span> <span class="token string">&quot;bitcoincash:qz42xz5y2hfltsa94mwm36pnl3ew8u72cc9l038x8m&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// &lt;-- must be CashAddr format</span>
<span class="token keyword">const</span> bchChangeReceiverAddress <span class="token operator">=</span> <span class="token string">&quot;bitcoincash:qzd5hqnlu2gprdxphqt6jvft33s3m2hegcqtu6mktg&quot;</span><span class="token punctuation">;</span>     <span class="token comment">// &lt;-- must be CashAddr format</span>

<span class="token keyword">let</span> sendAmountsInSatoshi       <span class="token operator">=</span> <span class="token number">1000</span><span class="token punctuation">;</span>


<span class="token keyword">const</span> bitboxNetwork <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">slpjs<span class="token punctuation">.</span>BitboxNetwork</span><span class="token punctuation">(</span><span class="token constant">BITBOX</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


<span class="token comment">// 1) Check that token balance is greater than our desired sendAmount</span>
<span class="token keyword">let</span> balances<span class="token punctuation">;</span> 
<span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  balances <span class="token operator">=</span> <span class="token keyword">await</span> bitboxNetwork<span class="token punctuation">.</span><span class="token function">getAllSlpBalancesAndUtxos</span><span class="token punctuation">(</span>fundingAddress<span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;'balances' variable is set.&quot;</span><span class="token punctuation">,</span> balances<span class="token punctuation">)</span><span class="token punctuation">;</span>
  
  <span class="token keyword">if</span> <span class="token punctuation">(</span>balances<span class="token punctuation">.</span>satoshis_available_bch <span class="token operator">&lt;</span> sendAmountsInSatoshi<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">&quot;You need to fund the addresses provided in this example with BCH.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;BCH balance in sats:&quot;</span><span class="token punctuation">,</span> balances<span class="token punctuation">.</span>satoshis_available_bch<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Wait for network responses...</span>

<span class="token comment">// 2) construct sendAmounts as an array of BigInt</span>
<span class="token keyword">let</span> sendAmounts <span class="token operator">=</span> <span class="token punctuation">[</span> <span class="token keyword">new</span> <span class="token class-name">BigInt</span><span class="token punctuation">(</span>sendAmountsInSatoshi<span class="token punctuation">)</span> <span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token comment">// 3) Get all of non-SLP UTXOs</span>
<span class="token keyword">let</span> inputUtxos <span class="token operator">=</span> balances<span class="token punctuation">.</span>nonSlpUtxos<span class="token punctuation">;</span>

<span class="token comment">// 4) Set the proper private key for each Utxo</span>
inputUtxos <span class="token operator">=</span> inputUtxos<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">utxo</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token operator">...</span>utxo<span class="token punctuation">,</span> wif<span class="token operator">:</span> fundingWif <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 5) Send token</span>
<span class="token keyword">let</span> sendTxId<span class="token punctuation">;</span>
<span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  sendTxId <span class="token operator">=</span> <span class="token keyword">await</span> bitboxNetwork<span class="token punctuation">.</span><span class="token function">simpleBchSend</span><span class="token punctuation">(</span>
    sendAmounts<span class="token punctuation">,</span> 
    inputUtxos<span class="token punctuation">,</span> 
    bchReceiverAddress<span class="token punctuation">,</span> 
    bchChangeReceiverAddress
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;SEND txn complete:&quot;</span><span class="token punctuation">,</span> sendTxId<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="send-send-tokens-from-a-frozen-address"><a href="#send-send-tokens-from-a-frozen-address" class="header-anchor">#</a> SEND - Send tokens from a frozen address</h3> <p>This example shows how to freeze funds until a future time using OP_CLTV.  Also see the <a href="https://github.com/simpleledger/slpjs/blob/master/examples/8-send-token-p2sh-frozen.ts" target="_blank" rel="noopener noreferrer">TypeScript example<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.  First, the address is calculated based on a user-defined public key and locktime. After the locktime has elapsed the user can proceed to spend those funds as demonstrated in this example:</p> <p>redeemScript (locking script) = <code>&lt;locktime&gt; OP_CHECKLOCKTIMEVERIFY OP_DROP &lt;pubkey&gt; OP_CHECKSIG</code></p> <p>unlocking script = <code>&lt;signature&gt;</code></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token constant">BITBOXSDK</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'bitbox-sdk'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> BigNumber <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'bignumber.js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> slpjs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'slpjs'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token constant">BITBOX</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BITBOXSDK<span class="token punctuation">.</span>BITBOX</span><span class="token punctuation">(</span><span class="token punctuation">{</span> restURL<span class="token operator">:</span> <span class="token string">'https://trest.bitcoin.com/v2/'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> slp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">slpjs<span class="token punctuation">.</span>Slp</span><span class="token punctuation">(</span><span class="token constant">BITBOX</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> helpers <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">slpjs<span class="token punctuation">.</span>TransactionHelpers</span><span class="token punctuation">(</span>slp<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> opcodes <span class="token operator">=</span> <span class="token constant">BITBOX</span><span class="token punctuation">.</span>Script<span class="token punctuation">.</span>opcodes<span class="token punctuation">;</span>

<span class="token keyword">const</span> pubkey <span class="token operator">=</span> <span class="token string">&quot;0286d74c6fb92cb7b70b817094f48bf8fd398e64663bc3ddd7acc0a709212b9f69&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> wif <span class="token operator">=</span> <span class="token string">&quot;cPamRLmPyuuwgRAbB6JHhXvrGwvHtmw9LpVi8QnUZYBubCeyjgs1&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> tokenReceiverAddress     <span class="token operator">=</span> <span class="token punctuation">[</span> <span class="token string">&quot;slptest:prk685k6r508xkj7u9g8v9p3f97hrmgr2qp7r4safs&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// &lt;-- must be simpleledger format</span>
<span class="token keyword">const</span> bchChangeReceiverAddress <span class="token operator">=</span> <span class="token string">&quot;slptest:prk685k6r508xkj7u9g8v9p3f97hrmgr2qp7r4safs&quot;</span><span class="token punctuation">;</span>     <span class="token comment">// &lt;-- must be simpleledger format</span>
<span class="token keyword">let</span> tokenId <span class="token operator">=</span> <span class="token string">&quot;f0c7a8a7addc29edbc193212057d91c3eb004678e15e4662773146bdd51f8d7a&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> sendAmounts <span class="token operator">=</span> <span class="token punctuation">[</span> <span class="token number">1</span> <span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token comment">// Set our BIP-113 time lock (subtract an hour to acount for MTP-11)</span>
<span class="token keyword">const</span> time_delay_seconds <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>  <span class="token comment">// let's just set it to 0 so we can redeem it immediately.</span>
<span class="token keyword">let</span> locktime<span class="token punctuation">,</span> locktimeBip62<span class="token punctuation">;</span>
<span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  locktime <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">await</span> <span class="token constant">BITBOX</span><span class="token punctuation">.</span>Blockchain<span class="token punctuation">.</span><span class="token function">getBlockchainInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>mediantime <span class="token operator">+</span> time_delay_seconds <span class="token operator">-</span> <span class="token number">3600</span><span class="token punctuation">;</span>

  <span class="token comment">// NOTE: the following locktime is hard-coded so that we can reuse the same P2SH address.</span>
  locktimeBip62 <span class="token operator">=</span> <span class="token string">'c808f05c'</span> <span class="token comment">//slpjs.Utils.get_BIP62_locktime_hex(locktime);  </span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Wait for network response...</span>

<span class="token keyword">let</span> redeemScript <span class="token operator">=</span> <span class="token constant">BITBOX</span><span class="token punctuation">.</span>Script<span class="token punctuation">.</span><span class="token function">encode</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
  Buffer<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>locktimeBip62<span class="token punctuation">,</span> <span class="token string">'hex'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  opcodes<span class="token punctuation">.</span><span class="token constant">OP_CHECKLOCKTIMEVERIFY</span><span class="token punctuation">,</span>
  opcodes<span class="token punctuation">.</span><span class="token constant">OP_DROP</span><span class="token punctuation">,</span>
  Buffer<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>pubkey<span class="token punctuation">,</span> <span class="token string">'hex'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  opcodes<span class="token punctuation">.</span><span class="token constant">OP_CHECKSIG</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span>

<span class="token comment">// Calculate the address for this script contract </span>
<span class="token comment">// We need to send some token and BCH to it before we can spend it!</span>
<span class="token keyword">let</span> fundingAddress <span class="token operator">=</span> slpjs<span class="token punctuation">.</span>Utils<span class="token punctuation">.</span><span class="token function">slpAddressFromHash160</span><span class="token punctuation">(</span>
                              <span class="token constant">BITBOX</span><span class="token punctuation">.</span>Crypto<span class="token punctuation">.</span><span class="token function">hash160</span><span class="token punctuation">(</span>redeemScript<span class="token punctuation">)</span><span class="token punctuation">,</span> 
                              <span class="token string">'testnet'</span><span class="token punctuation">,</span> 
                              <span class="token string">'p2sh'</span>
                            <span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// gives us: slptest:prk685k6r508xkj7u9g8v9p3f97hrmgr2qp7r4safs</span>

<span class="token keyword">const</span> bitboxNetwork <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">slpjs<span class="token punctuation">.</span>BitboxNetwork</span><span class="token punctuation">(</span><span class="token constant">BITBOX</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Fetch critical token information</span>
<span class="token keyword">let</span> tokenDecimals<span class="token punctuation">;</span>
<span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> tokenInfo <span class="token operator">=</span> <span class="token keyword">await</span> bitboxNetwork<span class="token punctuation">.</span><span class="token function">getTokenInformation</span><span class="token punctuation">(</span>tokenId<span class="token punctuation">)</span><span class="token punctuation">;</span>
    tokenDecimals <span class="token operator">=</span> tokenInfo<span class="token punctuation">.</span>decimals<span class="token punctuation">;</span> 
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Token precision: &quot;</span> <span class="token operator">+</span> tokenDecimals<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Wait for network response...</span>

<span class="token comment">// Check that token balance is greater than our desired sendAmount</span>
<span class="token keyword">let</span> balances<span class="token punctuation">;</span> 
<span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  balances <span class="token operator">=</span> <span class="token keyword">await</span> bitboxNetwork<span class="token punctuation">.</span><span class="token function">getAllSlpBalancesAndUtxos</span><span class="token punctuation">(</span>fundingAddress<span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;'balances' variable is set.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>balances<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span>balances<span class="token punctuation">.</span>slpTokenBalances<span class="token punctuation">[</span>tokenId<span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;You need to fund the addresses provided in this example with tokens and BCH.  Change the tokenId as required.&quot;</span><span class="token punctuation">)</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Token balance:&quot;</span><span class="token punctuation">,</span> balances<span class="token punctuation">.</span>slpTokenBalances<span class="token punctuation">[</span>tokenId<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">toFixed</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">10</span><span class="token operator">**</span>tokenDecimals<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Wait for network response...</span>

<span class="token comment">// Calculate send amount in &quot;Token Satoshis&quot;.  In this example we want to just send 1 token unit to someone...</span>
sendAmounts <span class="token operator">=</span> sendAmounts<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">a</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">BigNumber</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">times</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token operator">**</span>tokenDecimals<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// Don't forget to account for token precision</span>

<span class="token comment">// Get all of our token's UTXOs</span>
<span class="token keyword">let</span> inputUtxos <span class="token operator">=</span> balances<span class="token punctuation">.</span>slpTokenUtxos<span class="token punctuation">[</span>tokenId<span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token comment">// Simply sweep our BCH utxos to fuel the transaction</span>
inputUtxos <span class="token operator">=</span> inputUtxos<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>balances<span class="token punctuation">.</span>nonSlpUtxos<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Estimate the additional fee for our larger p2sh scriptSigs</span>
<span class="token keyword">let</span> extraFee <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span> <span class="token operator">*</span>  <span class="token comment">// for OP_CTLV and timelock data push</span>
                inputUtxos<span class="token punctuation">.</span>length  <span class="token comment">// this many times since we swept inputs from p2sh address</span>

<span class="token comment">// Build an unsigned transaction</span>
<span class="token keyword">let</span> unsignedTxnHex <span class="token operator">=</span> helpers<span class="token punctuation">.</span><span class="token function">simpleTokenSend</span><span class="token punctuation">(</span>tokenId<span class="token punctuation">,</span> sendAmounts<span class="token punctuation">,</span> inputUtxos<span class="token punctuation">,</span> tokenReceiverAddress<span class="token punctuation">,</span> bchChangeReceiverAddress<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> extraFee<span class="token punctuation">)</span><span class="token punctuation">;</span>
unsignedTxnHex <span class="token operator">=</span> helpers<span class="token punctuation">.</span><span class="token function">enableInputsCLTV</span><span class="token punctuation">(</span>unsignedTxnHex<span class="token punctuation">)</span><span class="token punctuation">;</span>
unsignedTxnHex <span class="token operator">=</span> helpers<span class="token punctuation">.</span><span class="token function">setTxnLocktime</span><span class="token punctuation">(</span>unsignedTxnHex<span class="token punctuation">,</span> locktime<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Build scriptSigs </span>
<span class="token keyword">let</span> scriptSigs <span class="token operator">=</span> inputUtxos<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">txo<span class="token punctuation">,</span> i</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> sigObj <span class="token operator">=</span> helpers<span class="token punctuation">.</span><span class="token function">get_transaction_sig_p2sh</span><span class="token punctuation">(</span>unsignedTxnHex<span class="token punctuation">,</span> wif<span class="token punctuation">,</span> i<span class="token punctuation">,</span> txo<span class="token punctuation">.</span>satoshis<span class="token punctuation">,</span> redeemScript<span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      index<span class="token operator">:</span> i<span class="token punctuation">,</span>
      lockingScriptBuf<span class="token operator">:</span> redeemScript<span class="token punctuation">,</span>
      unlockingScriptBufArray<span class="token operator">:</span> <span class="token punctuation">[</span> sigObj<span class="token punctuation">.</span>signatureBuf <span class="token punctuation">]</span>
  <span class="token punctuation">}</span> 
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">let</span> signedTxn <span class="token operator">=</span> helpers<span class="token punctuation">.</span><span class="token function">addScriptSigs</span><span class="token punctuation">(</span>unsignedTxnHex<span class="token punctuation">,</span> scriptSigs<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 11) Send token</span>
<span class="token keyword">let</span> sendTxid<span class="token punctuation">;</span>
<span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    sendTxid <span class="token operator">=</span> <span class="token keyword">await</span> bitboxNetwork<span class="token punctuation">.</span><span class="token function">sendTx</span><span class="token punctuation">(</span>signedTxn<span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;SEND txn complete:&quot;</span><span class="token punctuation">,</span> sendTxid<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><h3 id="send-send-tokens-from-2-of-2-multisig-p2sh"><a href="#send-send-tokens-from-2-of-2-multisig-p2sh" class="header-anchor">#</a> SEND - Send tokens from 2-of-2 multisig (P2SH)</h3> <p>This example shows the general workflow for sending tokens from a P2SH multisig address.  Also see the <a href="https://github.com/simpleledger/slpjs/blob/master/examples/9-send-token-p2sh-multisig.ts" target="_blank" rel="noopener noreferrer">TypeScript example<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.  Electron Cash SLP edition <a href="https://simpleledger.cash/project/electron-cash-slp-edition/" target="_blank" rel="noopener noreferrer">3.4.13<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> is compatible with signing the partially signed transactions generated from this example by using the <code>insert_input_values_for_EC_signers</code> helper method.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// Install BITBOX-SDK v8.1+ for blockchain access</span>
<span class="token comment">// For more information visit: https://www.npmjs.com/package/bitbox-sdk</span>
<span class="token keyword">const</span> <span class="token constant">BITBOXSDK</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'bitbox-sdk'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> BigNumber <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'bignumber.js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> slpjs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'slpjs'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token constant">BITBOX</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BITBOXSDK<span class="token punctuation">.</span>BITBOX</span><span class="token punctuation">(</span><span class="token punctuation">{</span> restURL<span class="token operator">:</span> <span class="token string">'https://rest.bitcoin.com/v2/'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> slp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">slpjs<span class="token punctuation">.</span>Slp</span><span class="token punctuation">(</span><span class="token constant">BITBOX</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> helpers <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">slpjs<span class="token punctuation">.</span>TransactionHelpers</span><span class="token punctuation">(</span>slp<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> pubkey_signer_1 <span class="token operator">=</span> <span class="token string">&quot;02471e07bcf7d47afd40e0bf4f806347f9e8af4dfbbb3c45691bbaefd4ea926307&quot;</span><span class="token punctuation">;</span> <span class="token comment">// Signer #1</span>
<span class="token keyword">const</span> pubkey_signer_2 <span class="token operator">=</span> <span class="token string">&quot;03472cfca5da3bf06a85c5fd860ffe911ef374cf2a9b754fd861d1ead668b15a32&quot;</span><span class="token punctuation">;</span> <span class="token comment">// Signer #2</span>

<span class="token comment">// we have two signers for this 2-of-2 multisig address (so for the missing key we just put &quot;null&quot;)</span>
<span class="token keyword">const</span> wifs <span class="token operator">=</span> <span class="token punctuation">[</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token string">&quot;L2AdfmxwsYu3KnRASZ51C3UEnduUDy1b21sSF9JbLNVEPzsxEZib&quot;</span><span class="token punctuation">]</span> <span class="token comment">//[ &quot;Ky6iiLSL2K9stMd4G5dLeXfpVKu5YRB6dhjCsHyof3eaB2cDngSr&quot;, null ];</span>

<span class="token comment">// to keep this example alive we will just send everything to the same address</span>
<span class="token keyword">const</span> tokenReceiverAddress     <span class="token operator">=</span> <span class="token punctuation">[</span> <span class="token string">&quot;simpleledger:pphnuh7dx24rcwjkj0sl6xqfyfzf23aj7udr0837gn&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// &lt;-- must be simpleledger format</span>
<span class="token keyword">const</span> bchChangeReceiverAddress <span class="token operator">=</span> <span class="token string">&quot;simpleledger:pphnuh7dx24rcwjkj0sl6xqfyfzf23aj7udr0837gn&quot;</span><span class="token punctuation">;</span>     <span class="token comment">// &lt;-- must be simpleledger format</span>
<span class="token keyword">let</span> tokenId <span class="token operator">=</span> <span class="token string">&quot;497291b8a1dfe69c8daea50677a3d31a5ef0e9484d8bebb610dac64bbc202fb7&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> sendAmounts <span class="token operator">=</span> <span class="token punctuation">[</span> <span class="token number">1</span> <span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> bitboxNetwork <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">slpjs<span class="token punctuation">.</span>BitboxNetwork</span><span class="token punctuation">(</span><span class="token constant">BITBOX</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 1) Fetch critical token information</span>
<span class="token keyword">let</span> tokenDecimals<span class="token punctuation">;</span>
<span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> tokenInfo <span class="token operator">=</span> <span class="token keyword">await</span> bitboxNetwork<span class="token punctuation">.</span><span class="token function">getTokenInformation</span><span class="token punctuation">(</span>tokenId<span class="token punctuation">)</span><span class="token punctuation">;</span>
    tokenDecimals <span class="token operator">=</span> tokenInfo<span class="token punctuation">.</span>decimals<span class="token punctuation">;</span> 
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Token precision: &quot;</span> <span class="token operator">+</span> tokenDecimals<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Wait for network responses...</span>

<span class="token comment">// 2) Check that token balance is greater than our desired sendAmount</span>
<span class="token keyword">let</span> fundingAddress <span class="token operator">=</span> <span class="token string">&quot;simpleledger:pphnuh7dx24rcwjkj0sl6xqfyfzf23aj7udr0837gn&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> balances<span class="token punctuation">;</span> 
<span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  balances <span class="token operator">=</span> <span class="token keyword">await</span> bitboxNetwork<span class="token punctuation">.</span><span class="token function">getAllSlpBalancesAndUtxos</span><span class="token punctuation">(</span>fundingAddress<span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;'balances' variable is set.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>balances<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span>balances<span class="token punctuation">.</span>slpTokenBalances<span class="token punctuation">[</span>tokenId<span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;You need to fund the addresses provided in this example with tokens and BCH.  Change the tokenId as required.&quot;</span><span class="token punctuation">)</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Token balance:&quot;</span><span class="token punctuation">,</span> balances<span class="token punctuation">.</span>slpTokenBalances<span class="token punctuation">[</span>tokenId<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">toFixed</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">10</span><span class="token operator">**</span>tokenDecimals<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Wait for network responses...</span>

<span class="token comment">// 3) Calculate send amount in &quot;Token Satoshis&quot;.  In this example we want to just send 1 token unit to someone...</span>
sendAmounts <span class="token operator">=</span> sendAmounts<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">a</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">BigNumber</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">times</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token operator">**</span>tokenDecimals<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// Don't forget to account for token precision</span>

<span class="token comment">// 4) Get all of our token's UTXOs</span>
<span class="token keyword">let</span> inputUtxos <span class="token operator">=</span> balances<span class="token punctuation">.</span>slpTokenUtxos<span class="token punctuation">[</span>tokenId<span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token comment">// 5) Simply sweep our BCH utxos to fuel the transaction</span>
inputUtxos <span class="token operator">=</span> inputUtxos<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>balances<span class="token punctuation">.</span>nonSlpUtxos<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 6) Estimate the additional fee for our larger p2sh scriptSigs</span>
<span class="token keyword">let</span> extraFee <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">2</span> <span class="token operator">*</span> <span class="token number">33</span> <span class="token operator">+</span>  <span class="token comment">// two pub keys in each redeemScript</span>
                <span class="token number">2</span> <span class="token operator">*</span> <span class="token number">72</span> <span class="token operator">+</span>  <span class="token comment">// two signatures in scriptSig</span>
                <span class="token number">10</span><span class="token punctuation">)</span> <span class="token operator">*</span>     <span class="token comment">// for OP_CMS and various length bytes</span>
                inputUtxos<span class="token punctuation">.</span>length  <span class="token comment">// this many times since we swept inputs from p2sh address</span>

<span class="token comment">// 7) Build an unsigned transaction</span>
<span class="token keyword">let</span> unsignedTxnHex <span class="token operator">=</span> helpers<span class="token punctuation">.</span><span class="token function">simpleTokenSend</span><span class="token punctuation">(</span>tokenId<span class="token punctuation">,</span> sendAmounts<span class="token punctuation">,</span> inputUtxos<span class="token punctuation">,</span> tokenReceiverAddress<span class="token punctuation">,</span> bchChangeReceiverAddress<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> extraFee<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 8) Build scriptSigs for all intputs</span>
<span class="token keyword">let</span> redeemData <span class="token operator">=</span> helpers<span class="token punctuation">.</span><span class="token function">build_P2SH_multisig_redeem_data</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>pubkey_signer_1<span class="token punctuation">,</span> pubkey_signer_2<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> scriptSigs <span class="token operator">=</span> inputUtxos<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">txo<span class="token punctuation">,</span> i</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> sigData <span class="token operator">=</span> redeemData<span class="token punctuation">.</span>pubKeys<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">pk<span class="token punctuation">,</span> j</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span><span class="token punctuation">(</span>wifs<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> helpers<span class="token punctuation">.</span><span class="token function">get_transaction_sig_p2sh</span><span class="token punctuation">(</span>unsignedTxnHex<span class="token punctuation">,</span> wifs<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span> i<span class="token punctuation">,</span> txo<span class="token punctuation">.</span>satoshis<span class="token punctuation">,</span> redeemData<span class="token punctuation">.</span>lockingScript<span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> helpers<span class="token punctuation">.</span><span class="token function">get_transaction_sig_filler</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> pk<span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> helpers<span class="token punctuation">.</span><span class="token function">build_P2SH_multisig_scriptSig</span><span class="token punctuation">(</span>redeemData<span class="token punctuation">,</span> i<span class="token punctuation">,</span> sigData<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// 9) apply our scriptSigs to the unsigned transaction</span>
<span class="token keyword">let</span> signedTxn <span class="token operator">=</span> helpers<span class="token punctuation">.</span><span class="token function">addScriptSigs</span><span class="token punctuation">(</span>unsignedTxnHex<span class="token punctuation">,</span> scriptSigs<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 10) Update transaction hex with input values to allow for our second signer who is using Electron Cash SLP edition (https://simpleledger.cash/project/electron-cash-slp-edition/)</span>
<span class="token keyword">let</span> input_values <span class="token operator">=</span> inputUtxos<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">txo</span> <span class="token operator">=&gt;</span> txo<span class="token punctuation">.</span>satoshis<span class="token punctuation">)</span>
signedTxn <span class="token operator">=</span> helpers<span class="token punctuation">.</span><span class="token function">insert_input_values_for_EC_signers</span><span class="token punctuation">(</span>signedTxn<span class="token punctuation">,</span> input_values<span class="token punctuation">)</span>

<span class="token comment">// 11) Send token</span>
<span class="token keyword">let</span> sendTxid<span class="token punctuation">;</span>
<span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    sendTxid <span class="token operator">=</span> <span class="token keyword">await</span> bitboxNetwork<span class="token punctuation">.</span><span class="token function">sendTx</span><span class="token punctuation">(</span>signedTxn<span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;SEND txn complete:&quot;</span><span class="token punctuation">,</span> sendTxid<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="burn-destroy-tokens-for-a-certain-token-id"><a href="#burn-destroy-tokens-for-a-certain-token-id" class="header-anchor">#</a> BURN - Destroy tokens for a certain Token Id</h3> <p>This example shows the general workflow for sending an existing token.  Also see the <a href="https://github.com/simpleledger/slpjs/blob/master/examples/10-burn-token.ts" target="_blank" rel="noopener noreferrer">TypeScript example<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>
<span class="token comment">// Install BITBOX-SDK v8.1+ for blockchain access</span>
<span class="token comment">// For more information visit: https://www.npmjs.com/package/bitbox-sdk</span>
<span class="token keyword">const</span> <span class="token constant">BITBOXSDK</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'bitbox-sdk'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> BigNumber <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'bignumber.js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> slpjs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'slpjs'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token constant">BITBOX</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BITBOXSDK<span class="token punctuation">.</span>BITBOX</span><span class="token punctuation">(</span><span class="token punctuation">{</span> restURL<span class="token operator">:</span> <span class="token string">'https://rest.bitcoin.com/v2/'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> fundingAddress           <span class="token operator">=</span> <span class="token string">&quot;simpleledger:qrhvcy5xlegs858fjqf8ssl6a4f7wpstaqnt0wauwu&quot;</span><span class="token punctuation">;</span> <span class="token comment">// &lt;-- must be simpleledger format</span>
<span class="token keyword">const</span> fundingWif               <span class="token operator">=</span> <span class="token string">&quot;L3gngkDg1HW5P9v5GdWWiCi3DWwvw5XnzjSPwNwVPN5DSck3AaiF&quot;</span><span class="token punctuation">;</span>    <span class="token comment">// &lt;-- compressed WIF format</span>
<span class="token keyword">const</span> bchChangeReceiverAddress <span class="token operator">=</span> <span class="token string">&quot;simpleledger:qrhvcy5xlegs858fjqf8ssl6a4f7wpstaqnt0wauwu&quot;</span><span class="token punctuation">;</span> <span class="token comment">// &lt;-- must be simpleledger format</span>
<span class="token keyword">let</span> tokenId <span class="token operator">=</span> <span class="token string">&quot;495322b37d6b2eae81f045eda612b95870a0c2b6069c58f70cf8ef4e6a9fd43a&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> burnAmount <span class="token operator">=</span> <span class="token number">102</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> bitboxNetwork <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">slpjs<span class="token punctuation">.</span>BitboxNetwork</span><span class="token punctuation">(</span><span class="token constant">BITBOX</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 1) Fetch critical token information</span>
<span class="token keyword">let</span> tokenDecimals<span class="token punctuation">;</span>
<span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> tokenInfo <span class="token operator">=</span> <span class="token keyword">await</span> bitboxNetwork<span class="token punctuation">.</span><span class="token function">getTokenInformation</span><span class="token punctuation">(</span>tokenId<span class="token punctuation">)</span><span class="token punctuation">;</span>
    tokenDecimals <span class="token operator">=</span> tokenInfo<span class="token punctuation">.</span>decimals<span class="token punctuation">;</span> 
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Token precision:'</span><span class="token punctuation">,</span> tokenDecimals<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 2) Check that token balance is greater than our desired sendAmount</span>
<span class="token keyword">let</span> balances<span class="token punctuation">;</span> 
<span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  balances <span class="token operator">=</span> <span class="token keyword">await</span> bitboxNetwork<span class="token punctuation">.</span><span class="token function">getAllSlpBalancesAndUtxos</span><span class="token punctuation">(</span>fundingAddress<span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;'balances' variable is set.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Token balance:'</span><span class="token punctuation">,</span> balances<span class="token punctuation">.</span>slpTokenBalances<span class="token punctuation">[</span>tokenId<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">toFixed</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">10</span><span class="token operator">**</span>tokenDecimals<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Wait for network responses...</span>

<span class="token comment">// 3) Calculate send amount in &quot;Token Satoshis&quot;.  In this example we want to just send 1 token unit to someone...</span>
<span class="token keyword">let</span> amount <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">BigNumber</span><span class="token punctuation">(</span>burnAmount<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">times</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token operator">**</span>tokenDecimals<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// Don't forget to account for token precision</span>

<span class="token comment">// 4) Get all of our token's UTXOs</span>
<span class="token keyword">let</span> inputUtxos <span class="token operator">=</span> balances<span class="token punctuation">.</span>slpTokenUtxos<span class="token punctuation">[</span>tokenId<span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token comment">// 5) Simply sweep our BCH utxos to fuel the transaction</span>
inputUtxos <span class="token operator">=</span> inputUtxos<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>balances<span class="token punctuation">.</span>nonSlpUtxos<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 6) Set the proper private key for each Utxo</span>
inputUtxos<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">txo</span> <span class="token operator">=&gt;</span> txo<span class="token punctuation">.</span>wif <span class="token operator">=</span> fundingWif<span class="token punctuation">)</span>

<span class="token comment">// 7) Send token</span>
<span class="token keyword">let</span> sendTxid<span class="token punctuation">;</span>
<span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    sendTxid <span class="token operator">=</span> <span class="token keyword">await</span> bitboxNetwork<span class="token punctuation">.</span><span class="token function">simpleTokenBurn</span><span class="token punctuation">(</span>
        tokenId<span class="token punctuation">,</span> 
        amount<span class="token punctuation">,</span> 
        inputUtxos<span class="token punctuation">,</span> 
        bchChangeReceiverAddress
        <span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;BURN txn complete:&quot;</span><span class="token punctuation">,</span>sendTxid<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="address-conversion"><a href="#address-conversion" class="header-anchor">#</a> Address Conversion</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">let</span> Utils <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'slpjs'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>Utils<span class="token punctuation">;</span>

<span class="token keyword">let</span> slpAddr <span class="token operator">=</span> Utils<span class="token punctuation">.</span><span class="token function">toSlpAddress</span><span class="token punctuation">(</span><span class="token string">&quot;bitcoincash:qzat5lfxt86mtph2fdmp96stxdmmw8hchyxrcmuhqf&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>slpAddr<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// simpleledger:qzat5lfxt86mtph2fdmp96stxdmmw8hchy2cnqfh7h</span>

<span class="token keyword">let</span> cashAddr <span class="token operator">=</span> Utils<span class="token punctuation">.</span><span class="token function">toCashAddress</span><span class="token punctuation">(</span>slpAddr<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>cashAddr<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// bitcoincash:qzat5lfxt86mtph2fdmp96stxdmmw8hchyxrcmuhqf</span>
</code></pre></div><h2 id="validation-examples"><a href="#validation-examples" class="header-anchor">#</a> Validation Examples</h2> <p>The following examples show three different ways how you can use this library to validate SLP transactions.  The validation techniques include:</p> <ul><li>Local Validator with a JSON RPC full node connection</li> <li>Local Validation with a remote full node (using <code>rest.bitcoin.com</code>)</li> <li>Remote Validation (using <code>rest.bitcoin.com</code>)</li></ul> <h3 id="local-validator-with-a-json-rpc-full-node-connection"><a href="#local-validator-with-a-json-rpc-full-node-connection" class="header-anchor">#</a> Local Validator with a JSON RPC full node connection</h3> <p>Validate SLP transaction locally with a local full node.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token constant">BITBOXSDK</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'bitbox-sdk'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> <span class="token constant">BITBOX</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BITBOXSDK<span class="token punctuation">.</span>BITBOX</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> slpjs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'slpjs'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> logger <span class="token operator">=</span> console<span class="token punctuation">;</span>
<span class="token keyword">const</span> RpcClient <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'bitcoin-rpc-promise'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> connectionString <span class="token operator">=</span> <span class="token string">'http://bitcoin:password@localhost:8332'</span>
<span class="token keyword">const</span> rpc <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RpcClient</span><span class="token punctuation">(</span>connectionString<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> slpValidator <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">slpjs<span class="token punctuation">.</span>LocalValidator</span><span class="token punctuation">(</span><span class="token constant">BITBOX</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">txids</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">[</span> <span class="token keyword">await</span> rpc<span class="token punctuation">.</span><span class="token function">getRawTransaction</span><span class="token punctuation">(</span>txids<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">]</span><span class="token punctuation">,</span> logger<span class="token punctuation">)</span>

<span class="token comment">// Result = false</span>
<span class="token comment">//let txid = &quot;903432f451049357d51c19eb529478621272e7572b05179f89bcb7be31e55aa7&quot;;</span>

<span class="token comment">// Result = true</span>
<span class="token keyword">let</span> txid <span class="token operator">=</span> <span class="token string">&quot;4a3829d6da924a16bbc0cc43d5d62b40996648a0c8f74725c15ec56ee930d0fa&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> isValid<span class="token punctuation">;</span>
<span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Validating:&quot;</span><span class="token punctuation">,</span> txid<span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;This may take a several seconds...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  isValid <span class="token operator">=</span> <span class="token keyword">await</span> slpValidator<span class="token punctuation">.</span><span class="token function">isValidSlpTxid</span><span class="token punctuation">(</span>txid<span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Final Result:&quot;</span><span class="token punctuation">,</span> isValid<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="local-validation-with-a-remote-full-node-using-rest-bitcoin-com"><a href="#local-validation-with-a-remote-full-node-using-rest-bitcoin-com" class="header-anchor">#</a> Local Validation with a remote full node (using <code>rest.bitcoin.com</code>)</h3> <p>Validate SLP transaction locally with a remote full node (i.e., rest.bitcoin.com).</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token constant">BITBOXSDK</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'bitbox-sdk'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> <span class="token constant">BITBOX</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BITBOXSDK<span class="token punctuation">.</span>BITBOX</span><span class="token punctuation">(</span><span class="token punctuation">{</span> restURL<span class="token operator">:</span> <span class="token string">'https://rest.bitcoin.com/v2/'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> slpjs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'slpjs'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> logger <span class="token operator">=</span> console<span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">getRawTransactions</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">txids</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token keyword">await</span> <span class="token constant">BITBOX</span><span class="token punctuation">.</span>RawTransactions<span class="token punctuation">.</span><span class="token function">getRawTransaction</span><span class="token punctuation">(</span>txids<span class="token punctuation">)</span> <span class="token punctuation">}</span>
<span class="token keyword">const</span> slpValidator <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">slpjs<span class="token punctuation">.</span>LocalValidator</span><span class="token punctuation">(</span><span class="token constant">BITBOX</span><span class="token punctuation">,</span> getRawTransactions<span class="token punctuation">,</span> logger<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Result = false</span>
<span class="token comment">//let txid = &quot;903432f451049357d51c19eb529478621272e7572b05179f89bcb7be31e55aa7&quot;;</span>

<span class="token comment">// Result = true</span>
<span class="token keyword">let</span> txid <span class="token operator">=</span> <span class="token string">&quot;4a3829d6da924a16bbc0cc43d5d62b40996648a0c8f74725c15ec56ee930d0fa&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> isValid<span class="token punctuation">;</span>
<span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Validating:&quot;</span><span class="token punctuation">,</span> txid<span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;This may take a several seconds...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  isValid <span class="token operator">=</span> <span class="token keyword">await</span> slpValidator<span class="token punctuation">.</span><span class="token function">isValidSlpTxid</span><span class="token punctuation">(</span>txid<span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Final Result:&quot;</span><span class="token punctuation">,</span> isValid<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><h3 id="remote-validation-using-rest-bitcoin-com"><a href="#remote-validation-using-rest-bitcoin-com" class="header-anchor">#</a> Remote Validation (using <code>rest.bitcoin.com</code>)</h3> <p>Validate SLP transaction using rest.bitcoin.com.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token constant">BITBOXSDK</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'bitbox-sdk'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> <span class="token constant">BITBOX</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BITBOXSDK<span class="token punctuation">.</span>BITBOX</span><span class="token punctuation">(</span><span class="token punctuation">{</span> restURL<span class="token operator">:</span> <span class="token string">'https://rest.bitcoin.com/v2/'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> slpjs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'slpjs'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> logger <span class="token operator">=</span> console<span class="token punctuation">;</span>

<span class="token keyword">const</span> slpValidator <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">slpjs<span class="token punctuation">.</span>BitboxNetwork</span><span class="token punctuation">(</span><span class="token constant">BITBOX</span><span class="token punctuation">,</span> <span class="token keyword">undefined</span><span class="token punctuation">,</span> logger<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Result = false</span>
<span class="token comment">//let txid = &quot;903432f451049357d51c19eb529478621272e7572b05179f89bcb7be31e55aa7&quot;;</span>

<span class="token comment">// Result = true</span>
<span class="token keyword">let</span> txid <span class="token operator">=</span> <span class="token string">&quot;ab1550876e217d68bfac55e50b4a82535bb20842f976bdfbc07cca19e8028f13&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> isValid<span class="token punctuation">;</span>
<span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Validating:&quot;</span><span class="token punctuation">,</span> txid<span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;This may take a several seconds...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  isValid <span class="token operator">=</span> <span class="token keyword">await</span> slpValidator<span class="token punctuation">.</span><span class="token function">isValidSlpTxid</span><span class="token punctuation">(</span>txid<span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Final Result:&quot;</span><span class="token punctuation">,</span> isValid<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><h2 id="building-testing"><a href="#building-testing" class="header-anchor">#</a> Building &amp; Testing</h2> <p>Building this project creates lib/*.js files and then creates browserified versions in the dist folder.</p> <h3 id="requirements"><a href="#requirements" class="header-anchor">#</a> Requirements</h3> <p>Running the unit tests require node.js v8.15+.</p> <h3 id="build"><a href="#build" class="header-anchor">#</a> Build</h3> <p><code>npm run build</code></p> <h3 id="test"><a href="#test" class="header-anchor">#</a> Test</h3> <p><code>npm run test</code></p></div> <div class="content-footer" data-v-4c735fbc><footer class="page-edit" data-v-4c735fbc><div class="edit-link"><a href="https://github.com/simpleledger/simpleledger.github.io/edit/develop/docs/packages/slpjs.md" target="_blank" rel="noopener noreferrer">Help us improve this page!</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">6/15/2020, 3:23:08 AM</span></div></footer> <div class="page-nav" data-v-4c735fbc><p class="inner"><span class="prev">
      ←
      <a href="/packages/overview/" class="prev">
        Overview
      </a></span> <span class="next"><a href="/packages/slp-validate/">
        SLP-Validate
      </a>
      →
    </span></p></div></div> <div data-v-4c735fbc></div> <div data-v-4c735fbc></div> </main></div><div class="global-ui"><!----><div></div></div></div>
    <script src="/assets/js/app.727bd0bc.js" defer></script><script src="/assets/js/2.59409279.js" defer></script><script src="/assets/js/6.cb6c63cc.js" defer></script><script src="/assets/js/30.b3de8cee.js" defer></script>
  </body>
</html>
